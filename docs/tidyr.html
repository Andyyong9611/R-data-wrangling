<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Data Manipulation using tidyr | Data Wrangling with R</title>
  <meta name="description" content="Workshop materials for Data Wrangling with R" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Data Manipulation using tidyr | Data Wrangling with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Workshop materials for Data Wrangling with R" />
  <meta name="github-repo" content="cengel/R-data-wrangling" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Data Manipulation using tidyr | Data Wrangling with R" />
  
  <meta name="twitter:description" content="Workshop materials for Data Wrangling with R" />
  

<meta name="author" content="Claudia A Engel" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="dplyr.html"/>

<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Wrangling with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prerequisites and Preparations</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#references"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>1</b> Data Manipulation using <strong><code>dplyr</code></strong></a>
<ul>
<li class="chapter" data-level="1.1" data-path="dplyr.html"><a href="dplyr.html#what-is-dplyr"><i class="fa fa-check"></i><b>1.1</b> What is <strong><code>dplyr</code></strong>?</a></li>
<li class="chapter" data-level="1.2" data-path="dplyr.html"><a href="dplyr.html#subsetting-columns-and-rows"><i class="fa fa-check"></i><b>1.2</b> Subsetting columns and rows</a></li>
<li class="chapter" data-level="1.3" data-path="dplyr.html"><a href="dplyr.html#pipes"><i class="fa fa-check"></i><b>1.3</b> Pipes</a></li>
<li class="chapter" data-level="1.4" data-path="dplyr.html"><a href="dplyr.html#add-new-columns"><i class="fa fa-check"></i><b>1.4</b> Add new columns</a></li>
<li class="chapter" data-level="1.5" data-path="dplyr.html"><a href="dplyr.html#what-is-split-apply-combine"><i class="fa fa-check"></i><b>1.5</b> What is split-apply-combine?</a></li>
<li class="chapter" data-level="1.6" data-path="dplyr.html"><a href="dplyr.html#tallying"><i class="fa fa-check"></i><b>1.6</b> Tallying</a></li>
<li class="chapter" data-level="1.7" data-path="dplyr.html"><a href="dplyr.html#joining-two-tables"><i class="fa fa-check"></i><b>1.7</b> Joining two tables</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tidyr.html"><a href="tidyr.html"><i class="fa fa-check"></i><b>2</b> Data Manipulation using <strong><code>tidyr</code></strong></a>
<ul>
<li class="chapter" data-level="2.1" data-path="tidyr.html"><a href="tidyr.html#about-long-and-wide-table-format"><i class="fa fa-check"></i><b>2.1</b> About long and wide table format</a></li>
<li class="chapter" data-level="2.2" data-path="tidyr.html"><a href="tidyr.html#long-to-wide-with-pivot_wider"><i class="fa fa-check"></i><b>2.2</b> Long to Wide with <code>pivot_wider</code></a></li>
<li class="chapter" data-level="2.3" data-path="tidyr.html"><a href="tidyr.html#wide-to-long-with-pivot_longer"><i class="fa fa-check"></i><b>2.3</b> Wide to long with <code>pivot_longer</code></a></li>
<li class="chapter" data-level="2.4" data-path="tidyr.html"><a href="tidyr.html#exporting-data"><i class="fa fa-check"></i><b>2.4</b> Exporting data</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Wrangling with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidyr" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Data Manipulation using <strong><code>tidyr</code></strong></h1>
<blockquote>
<p>Learning Objectives</p>
<ul>
<li>Understand the concept of a wide and a long table format and for which purpose those formats are useful.</li>
<li>Understand what key-value pairs are.</li>
<li>Reshape a data frame from long to wide format and back with the <code>pivot_wider</code> and <code>pivot_longer</code> commands from the <strong><code>tidyr</code></strong> package.</li>
<li>Export a data frame to a .csv file.</li>
</ul>
</blockquote>
<hr />
<p><code>dplyr</code> pairs nicely with <strong><code>tidyr</code></strong> which enables you to swiftly convert between different data formats for plotting and analysis.</p>
<p>The package <strong><code>tidyr</code></strong> addresses the common problem of wanting to reshape your data for plotting and use by different R functions. Sometimes we want data sets where we have one row per observation. Sometimes we want a data frame where each observation type has its own column, and rows are instead more aggregated groups - like surveys, where each column represents an answer. Moving back and forth between these formats is nontrivial, and <strong><code>tidyr</code></strong> gives you tools for this and more sophisticated data manipulation.</p>
<p>To learn more about <strong><code>tidyr</code></strong> after the workshop, you may want to check out this <a href="https://github.com/rstudio/cheatsheets/raw/master/data-import.pdf">cheatsheet about <strong><code>tidyr</code></strong></a>.</p>
<div id="about-long-and-wide-table-format" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> About long and wide table format</h2>
<p>The ‘long’ format is where:</p>
<ul>
<li>each column is a variable</li>
<li>each row is an observation</li>
</ul>
<p>In the ‘long’ format, you usually have 1 column for the observed variable and
the other columns are ID variables.</p>
<p>For the ‘wide’ format a row, for example could be a reserarch subject for which you have multiple observation variables containing the same type of data, for example responses to a set of survey questions, or repeated observations over time, or a mix of both. Here is an example:</p>
<p>You may find data input may be simpler or some other
applications may prefer the ‘wide’ format. However, many of <code>R</code>‘s functions have
been designed assuming you have ’long’ format data. This tutorial will help you
efficiently transform your data regardless of original format.</p>
<div class="figure"><span id="fig:wide-vs-long"></span>
<img src="img/wide-vs-long.png" alt="Wide vs. Long Table Format" width="30%" />
<p class="caption">
Figure 2.1: Wide vs. Long Table Format
</p>
</div>
<p>The choice of data format affects readability. For humans, the wide format is often more intuitive, since we can often see more of the data on the screen due to its shape. However, the long format is more machine readable and is closer to the formatting of databases. The <code>ID</code> variables in our dataframes are similar to the fields in a database and observed variables are like the database values.</p>
<blockquote>
<p>Challenge 1</p>
<p>Is stops in a long or wide format?</p>
</blockquote>
</div>
<div id="long-to-wide-with-pivot_wider" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Long to Wide with <code>pivot_wider</code></h2>
<p>Now let’s see this in action. First, using <strong><code>dplyr</code></strong>, let’s create a data frame with the counts of different violations for each county:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="tidyr.html#cb50-1" aria-hidden="true" tabindex="-1"></a>violations <span class="ot">&lt;-</span> stops <span class="sc">%&gt;%</span></span>
<span id="cb50-2"><a href="tidyr.html#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(county_name, violation)</span>
<span id="cb50-3"><a href="tidyr.html#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="tidyr.html#cb50-4" aria-hidden="true" tabindex="-1"></a>violations</span></code></pre></div>
<pre><code>#&gt;         county_name                violation    n
#&gt; 1             Adams        Breaks-Lights-etc    7
#&gt; 2             Adams         Careless driving   48
#&gt; 3             Adams License-Permit-Insurance  118
#&gt; 4             Adams         Other or unknown   35
#&gt; 5             Adams                Seat belt  229
#&gt; 6             Adams                 Speeding  505
#&gt; 7            Alcorn        Breaks-Lights-etc   62
#&gt; 8            Alcorn         Careless driving  100
#&gt; 9            Alcorn License-Permit-Insurance  737
#&gt; 10           Alcorn         Other or unknown  418
#&gt; 11           Alcorn                Seat belt  629
#&gt; 12           Alcorn                 Speeding 1399
#&gt; 13            Amite        Breaks-Lights-etc   47
#&gt; 14            Amite         Careless driving   86
#&gt; 15            Amite License-Permit-Insurance  370
#&gt; 16            Amite         Other or unknown  143
#&gt; 17            Amite                Seat belt  336
#&gt; 18            Amite                 Speeding 1939
#&gt; 19           Attala        Breaks-Lights-etc   99
#&gt; 20           Attala         Careless driving  113
#&gt; 21           Attala License-Permit-Insurance  526
#&gt; 22           Attala         Other or unknown  155
#&gt; 23           Attala                Seat belt  748
#&gt; 24           Attala                 Speeding 2562
#&gt; 25           Benton        Breaks-Lights-etc    3
#&gt; 26           Benton         Careless driving    9
#&gt; 27           Benton License-Permit-Insurance   73
#&gt; 28           Benton         Other or unknown   26
#&gt; 29           Benton                Seat belt   29
#&gt; 30           Benton                 Speeding   74
#&gt; 31          Bolivar        Breaks-Lights-etc   57
#&gt; 32          Bolivar         Careless driving  139
#&gt; 33          Bolivar License-Permit-Insurance 1034
#&gt; 34          Bolivar         Other or unknown  254
#&gt; 35          Bolivar                Seat belt  729
#&gt; 36          Bolivar                 Speeding 2313
#&gt; 37          Calhoun        Breaks-Lights-etc   26
#&gt; 38          Calhoun         Careless driving   38
#&gt; 39          Calhoun License-Permit-Insurance  383
#&gt; 40          Calhoun         Other or unknown  102
#&gt; 41          Calhoun                Seat belt  150
#&gt; 42          Calhoun                 Speeding  959
#&gt; 43          Carroll        Breaks-Lights-etc   26
#&gt; 44          Carroll         Careless driving   40
#&gt; 45          Carroll License-Permit-Insurance  323
#&gt; 46          Carroll         Other or unknown  103
#&gt; 47          Carroll                Seat belt  158
#&gt; 48          Carroll                 Speeding 1138
#&gt; 49        Chickasaw        Breaks-Lights-etc   42
#&gt; 50        Chickasaw         Careless driving   53
#&gt; 51        Chickasaw License-Permit-Insurance 1378
#&gt; 52        Chickasaw         Other or unknown  232
#&gt; 53        Chickasaw                Seat belt  442
#&gt; 54        Chickasaw                 Speeding 1722
#&gt; 55          Choctaw        Breaks-Lights-etc    8
#&gt; 56          Choctaw         Careless driving    6
#&gt; 57          Choctaw License-Permit-Insurance   73
#&gt; 58          Choctaw         Other or unknown   24
#&gt; 59          Choctaw                Seat belt   18
#&gt; 60          Choctaw                 Speeding  484
#&gt; 61        Claiborne        Breaks-Lights-etc   25
#&gt; 62        Claiborne         Careless driving   39
#&gt; 63        Claiborne License-Permit-Insurance  102
#&gt; 64        Claiborne         Other or unknown  162
#&gt; 65        Claiborne                Seat belt  177
#&gt; 66        Claiborne                 Speeding  882
#&gt; 67           Clarke        Breaks-Lights-etc    8
#&gt; 68           Clarke         Careless driving   15
#&gt; 69           Clarke License-Permit-Insurance  169
#&gt; 70           Clarke         Other or unknown   66
#&gt; 71           Clarke                Seat belt   33
#&gt; 72           Clarke                 Speeding  294
#&gt; 73             Clay        Breaks-Lights-etc   39
#&gt; 74             Clay         Careless driving   48
#&gt; 75             Clay License-Permit-Insurance  424
#&gt; 76             Clay         Other or unknown   86
#&gt; 77             Clay                Seat belt  105
#&gt; 78             Clay                 Speeding  279
#&gt; 79          Coahoma        Breaks-Lights-etc   17
#&gt; 80          Coahoma         Careless driving   55
#&gt; 81          Coahoma License-Permit-Insurance  410
#&gt; 82          Coahoma         Other or unknown  440
#&gt; 83          Coahoma                Seat belt  401
#&gt; 84          Coahoma                 Speeding 1268
#&gt; 85           Copiah        Breaks-Lights-etc  140
#&gt; 86           Copiah         Careless driving  215
#&gt; 87           Copiah License-Permit-Insurance  993
#&gt; 88           Copiah         Other or unknown  337
#&gt; 89           Copiah                Seat belt  850
#&gt; 90           Copiah                 Speeding 3551
#&gt; 91        Covington        Breaks-Lights-etc   11
#&gt; 92        Covington         Careless driving   66
#&gt; 93        Covington License-Permit-Insurance  714
#&gt; 94        Covington         Other or unknown  135
#&gt; 95        Covington                Seat belt   98
#&gt; 96        Covington                 Speeding  874
#&gt; 97           DeSoto        Breaks-Lights-etc   40
#&gt; 98           DeSoto         Careless driving   61
#&gt; 99           DeSoto License-Permit-Insurance  187
#&gt; 100          DeSoto         Other or unknown  123
#&gt; 101          DeSoto                Seat belt  145
#&gt; 102          DeSoto                 Speeding  647
#&gt; 103         Forrest        Breaks-Lights-etc   57
#&gt; 104         Forrest         Careless driving  264
#&gt; 105         Forrest License-Permit-Insurance  969
#&gt; 106         Forrest         Other or unknown  457
#&gt; 107         Forrest                Seat belt  261
#&gt; 108         Forrest                 Speeding 2427
#&gt; 109        Franklin        Breaks-Lights-etc   26
#&gt; 110        Franklin         Careless driving   61
#&gt; 111        Franklin License-Permit-Insurance  408
#&gt; 112        Franklin         Other or unknown  155
#&gt; 113        Franklin                Seat belt  339
#&gt; 114        Franklin                 Speeding 1518
#&gt; 115          George        Breaks-Lights-etc   33
#&gt; 116          George         Careless driving   88
#&gt; 117          George License-Permit-Insurance  820
#&gt; 118          George         Other or unknown  360
#&gt; 119          George                Seat belt  355
#&gt; 120          George                 Speeding 3122
#&gt; 121          Greene        Breaks-Lights-etc    5
#&gt; 122          Greene         Careless driving   35
#&gt; 123          Greene License-Permit-Insurance  148
#&gt; 124          Greene         Other or unknown   57
#&gt; 125          Greene                Seat belt   21
#&gt; 126          Greene                 Speeding  787
#&gt; 127         Grenada        Breaks-Lights-etc   33
#&gt; 128         Grenada         Careless driving   45
#&gt; 129         Grenada License-Permit-Insurance  506
#&gt; 130         Grenada         Other or unknown  196
#&gt; 131         Grenada                Seat belt  180
#&gt; 132         Grenada                 Speeding 1684
#&gt; 133         Hancock        Breaks-Lights-etc  213
#&gt; 134         Hancock         Careless driving   90
#&gt; 135         Hancock License-Permit-Insurance  344
#&gt; 136         Hancock         Other or unknown  145
#&gt; 137         Hancock                Seat belt  563
#&gt; 138         Hancock                 Speeding 2435
#&gt; 139        Harrison        Breaks-Lights-etc  212
#&gt; 140        Harrison         Careless driving  312
#&gt; 141        Harrison License-Permit-Insurance 1273
#&gt; 142        Harrison         Other or unknown  443
#&gt; 143        Harrison                Seat belt  306
#&gt; 144        Harrison                 Speeding 3550
#&gt; 145           Hinds        Breaks-Lights-etc  136
#&gt; 146           Hinds         Careless driving  264
#&gt; 147           Hinds License-Permit-Insurance  648
#&gt; 148           Hinds         Other or unknown  695
#&gt; 149           Hinds                Seat belt  609
#&gt; 150           Hinds                 Speeding 2641
#&gt; 151          Holmes        Breaks-Lights-etc   23
#&gt; 152          Holmes         Careless driving   91
#&gt; 153          Holmes License-Permit-Insurance  375
#&gt; 154          Holmes         Other or unknown  228
#&gt; 155          Holmes                Seat belt  350
#&gt; 156          Holmes                 Speeding 3249
#&gt; 157       Humphreys        Breaks-Lights-etc    3
#&gt; 158       Humphreys         Careless driving    8
#&gt; 159       Humphreys License-Permit-Insurance  199
#&gt; 160       Humphreys         Other or unknown   35
#&gt; 161       Humphreys                Seat belt   37
#&gt; 162       Humphreys                 Speeding 1836
#&gt; 163       Issaquena        Breaks-Lights-etc    9
#&gt; 164       Issaquena         Careless driving    4
#&gt; 165       Issaquena License-Permit-Insurance   23
#&gt; 166       Issaquena         Other or unknown  261
#&gt; 167       Issaquena                Seat belt  230
#&gt; 168       Issaquena                 Speeding  610
#&gt; 169        Itawamba        Breaks-Lights-etc   66
#&gt; 170        Itawamba         Careless driving  128
#&gt; 171        Itawamba License-Permit-Insurance  640
#&gt; 172        Itawamba         Other or unknown  160
#&gt; 173        Itawamba                Seat belt  740
#&gt; 174        Itawamba                 Speeding  747
#&gt; 175         Jackson        Breaks-Lights-etc  111
#&gt; 176         Jackson         Careless driving  532
#&gt; 177         Jackson License-Permit-Insurance  662
#&gt; 178         Jackson         Other or unknown  490
#&gt; 179         Jackson                Seat belt  669
#&gt; 180         Jackson                 Speeding 4295
#&gt; 181          Jasper        Breaks-Lights-etc   13
#&gt; 182          Jasper         Careless driving   46
#&gt; 183          Jasper License-Permit-Insurance  368
#&gt; 184          Jasper         Other or unknown  109
#&gt; 185          Jasper                Seat belt   81
#&gt; 186          Jasper                 Speeding 1391
#&gt; 187       Jefferson        Breaks-Lights-etc  173
#&gt; 188       Jefferson         Careless driving   98
#&gt; 189       Jefferson License-Permit-Insurance  670
#&gt; 190       Jefferson         Other or unknown  315
#&gt; 191       Jefferson                Seat belt  420
#&gt; 192       Jefferson                 Speeding 2536
#&gt; 193 Jefferson Davis        Breaks-Lights-etc    4
#&gt; 194 Jefferson Davis         Careless driving   46
#&gt; 195 Jefferson Davis License-Permit-Insurance  225
#&gt; 196 Jefferson Davis         Other or unknown   47
#&gt; 197 Jefferson Davis                Seat belt   29
#&gt; 198 Jefferson Davis                 Speeding  607
#&gt; 199           Jones        Breaks-Lights-etc   22
#&gt; 200           Jones         Careless driving  162
#&gt; 201           Jones License-Permit-Insurance  674
#&gt; 202           Jones         Other or unknown  257
#&gt; 203           Jones                Seat belt  300
#&gt; 204           Jones                 Speeding 2418
#&gt; 205          Kemper        Breaks-Lights-etc   24
#&gt; 206          Kemper         Careless driving   16
#&gt; 207          Kemper License-Permit-Insurance  129
#&gt; 208          Kemper         Other or unknown  105
#&gt; 209          Kemper                Seat belt  109
#&gt; 210          Kemper                 Speeding 2117
#&gt; 211       Lafayette        Breaks-Lights-etc   12
#&gt; 212       Lafayette         Careless driving   57
#&gt; 213       Lafayette License-Permit-Insurance  140
#&gt; 214       Lafayette         Other or unknown   89
#&gt; 215       Lafayette                Seat belt  261
#&gt; 216       Lafayette                 Speeding  610
#&gt; 217           Lamar        Breaks-Lights-etc   31
#&gt; 218           Lamar         Careless driving   99
#&gt; 219           Lamar License-Permit-Insurance  506
#&gt; 220           Lamar         Other or unknown  264
#&gt; 221           Lamar                Seat belt  150
#&gt; 222           Lamar                 Speeding 2315
#&gt; 223      Lauderdale        Breaks-Lights-etc   50
#&gt; 224      Lauderdale         Careless driving  354
#&gt; 225      Lauderdale License-Permit-Insurance  949
#&gt; 226      Lauderdale         Other or unknown  535
#&gt; 227      Lauderdale                Seat belt  403
#&gt; 228      Lauderdale                 Speeding 6504
#&gt; 229        Lawrence        Breaks-Lights-etc    9
#&gt; 230        Lawrence         Careless driving   13
#&gt; 231        Lawrence License-Permit-Insurance  108
#&gt; 232        Lawrence         Other or unknown   39
#&gt; 233        Lawrence                Seat belt   52
#&gt; 234        Lawrence                 Speeding  347
#&gt; 235           Leake        Breaks-Lights-etc   16
#&gt; 236           Leake         Careless driving   57
#&gt; 237           Leake License-Permit-Insurance  322
#&gt; 238           Leake         Other or unknown   81
#&gt; 239           Leake                Seat belt  131
#&gt; 240           Leake                 Speeding 2390
#&gt; 241             Lee        Breaks-Lights-etc   97
#&gt; 242             Lee         Careless driving  182
#&gt; 243             Lee License-Permit-Insurance  833
#&gt; 244             Lee         Other or unknown  202
#&gt; 245             Lee                Seat belt  937
#&gt; 246             Lee                 Speeding 2709
#&gt; 247         Leflore        Breaks-Lights-etc   45
#&gt; 248         Leflore         Careless driving   59
#&gt; 249         Leflore License-Permit-Insurance  611
#&gt; 250         Leflore         Other or unknown  153
#&gt; 251         Leflore                Seat belt  195
#&gt; 252         Leflore                 Speeding  611
#&gt; 253         Lincoln        Breaks-Lights-etc   22
#&gt; 254         Lincoln         Careless driving   83
#&gt; 255         Lincoln License-Permit-Insurance  264
#&gt; 256         Lincoln         Other or unknown  100
#&gt; 257         Lincoln                Seat belt  408
#&gt; 258         Lincoln                 Speeding 2951
#&gt; 259         Lowndes        Breaks-Lights-etc   28
#&gt; 260         Lowndes         Careless driving  130
#&gt; 261         Lowndes License-Permit-Insurance  456
#&gt; 262         Lowndes         Other or unknown   71
#&gt; 263         Lowndes                Seat belt  235
#&gt; 264         Lowndes                 Speeding 2290
#&gt; 265         Madison        Breaks-Lights-etc   50
#&gt; 266         Madison         Careless driving   73
#&gt; 267         Madison License-Permit-Insurance  270
#&gt; 268         Madison         Other or unknown   79
#&gt; 269         Madison                Seat belt   86
#&gt; 270         Madison                 Speeding 1451
#&gt; 271          Marion        Breaks-Lights-etc    7
#&gt; 272          Marion         Careless driving   13
#&gt; 273          Marion License-Permit-Insurance  103
#&gt; 274          Marion         Other or unknown   22
#&gt; 275          Marion                Seat belt   28
#&gt; 276          Marion                 Speeding   66
#&gt; 277        Marshall        Breaks-Lights-etc   14
#&gt; 278        Marshall         Careless driving    8
#&gt; 279        Marshall License-Permit-Insurance   40
#&gt; 280        Marshall         Other or unknown   38
#&gt; 281        Marshall                Seat belt   40
#&gt; 282        Marshall                 Speeding   80
#&gt; 283          Monroe        Breaks-Lights-etc  190
#&gt; 284          Monroe         Careless driving  200
#&gt; 285          Monroe License-Permit-Insurance 2889
#&gt; 286          Monroe         Other or unknown  549
#&gt; 287          Monroe                Seat belt 1300
#&gt; 288          Monroe                 Speeding 5341
#&gt; 289      Montgomery        Breaks-Lights-etc   79
#&gt; 290      Montgomery         Careless driving   69
#&gt; 291      Montgomery License-Permit-Insurance  573
#&gt; 292      Montgomery         Other or unknown  150
#&gt; 293      Montgomery                Seat belt  187
#&gt; 294      Montgomery                 Speeding 2325
#&gt; 295         Neshoba        Breaks-Lights-etc    1
#&gt; 296         Neshoba         Careless driving    3
#&gt; 297         Neshoba License-Permit-Insurance   19
#&gt; 298         Neshoba         Other or unknown   20
#&gt; 299         Neshoba                Seat belt    4
#&gt; 300         Neshoba                 Speeding   30
#&gt; 301          Newton        Breaks-Lights-etc   28
#&gt; 302          Newton         Careless driving   50
#&gt; 303          Newton License-Permit-Insurance  334
#&gt; 304          Newton         Other or unknown  254
#&gt; 305          Newton                Seat belt  308
#&gt; 306          Newton                 Speeding 1511
#&gt; 307         Noxubee        Breaks-Lights-etc    1
#&gt; 308         Noxubee         Careless driving    1
#&gt; 309         Noxubee License-Permit-Insurance   10
#&gt; 310         Noxubee         Other or unknown    5
#&gt; 311         Noxubee                Seat belt    2
#&gt; 312         Noxubee                 Speeding   11
#&gt; 313       Oktibbeha        Breaks-Lights-etc   13
#&gt; 314       Oktibbeha         Careless driving   69
#&gt; 315       Oktibbeha License-Permit-Insurance  818
#&gt; 316       Oktibbeha         Other or unknown  151
#&gt; 317       Oktibbeha                Seat belt  215
#&gt; 318       Oktibbeha                 Speeding 2734
#&gt; 319          Panola        Breaks-Lights-etc   15
#&gt; 320          Panola         Careless driving  100
#&gt; 321          Panola License-Permit-Insurance  206
#&gt; 322          Panola         Other or unknown   77
#&gt; 323          Panola                Seat belt  387
#&gt; 324          Panola                 Speeding  969
#&gt; 325     Pearl River        Breaks-Lights-etc   16
#&gt; 326     Pearl River         Careless driving   14
#&gt; 327     Pearl River License-Permit-Insurance  301
#&gt; 328     Pearl River         Other or unknown  166
#&gt; 329     Pearl River                Seat belt   32
#&gt; 330     Pearl River                 Speeding  316
#&gt; 331           Perry        Breaks-Lights-etc    6
#&gt; 332           Perry         Careless driving    5
#&gt; 333           Perry License-Permit-Insurance   65
#&gt; 334           Perry         Other or unknown   41
#&gt; 335           Perry                Seat belt   26
#&gt; 336           Perry                 Speeding  642
#&gt; 337            Pike        Breaks-Lights-etc   47
#&gt; 338            Pike         Careless driving  163
#&gt; 339            Pike License-Permit-Insurance  752
#&gt; 340            Pike         Other or unknown  329
#&gt; 341            Pike                Seat belt  490
#&gt; 342            Pike                 Speeding 2387
#&gt; 343        Pontotoc        Breaks-Lights-etc   16
#&gt; 344        Pontotoc         Careless driving   79
#&gt; 345        Pontotoc License-Permit-Insurance  300
#&gt; 346        Pontotoc         Other or unknown   89
#&gt; 347        Pontotoc                Seat belt  111
#&gt; 348        Pontotoc                 Speeding 1057
#&gt; 349        Prentiss        Breaks-Lights-etc   23
#&gt; 350        Prentiss         Careless driving   65
#&gt; 351        Prentiss License-Permit-Insurance  296
#&gt; 352        Prentiss         Other or unknown  137
#&gt; 353        Prentiss                Seat belt  377
#&gt; 354        Prentiss                 Speeding 1143
#&gt; 355         Quitman        Breaks-Lights-etc   14
#&gt; 356         Quitman         Careless driving   47
#&gt; 357         Quitman License-Permit-Insurance  166
#&gt; 358         Quitman         Other or unknown   87
#&gt; 359         Quitman                Seat belt  223
#&gt; 360         Quitman                 Speeding  978
#&gt; 361          Rankin        Breaks-Lights-etc    5
#&gt; 362          Rankin         Careless driving   25
#&gt; 363          Rankin License-Permit-Insurance  100
#&gt; 364          Rankin         Other or unknown   41
#&gt; 365          Rankin                Seat belt   29
#&gt; 366          Rankin                 Speeding  156
#&gt; 367           Scott        Breaks-Lights-etc   41
#&gt; 368           Scott         Careless driving  208
#&gt; 369           Scott License-Permit-Insurance 1237
#&gt; 370           Scott         Other or unknown  234
#&gt; 371           Scott                Seat belt  649
#&gt; 372           Scott                 Speeding 2556
#&gt; 373         Sharkey        Breaks-Lights-etc   11
#&gt; 374         Sharkey         Careless driving   12
#&gt; 375         Sharkey License-Permit-Insurance   43
#&gt; 376         Sharkey         Other or unknown  448
#&gt; 377         Sharkey                Seat belt  328
#&gt; 378         Sharkey                 Speeding  930
#&gt; 379         Simpson        Breaks-Lights-etc   78
#&gt; 380         Simpson         Careless driving   96
#&gt; 381         Simpson License-Permit-Insurance  760
#&gt; 382         Simpson         Other or unknown  219
#&gt; 383         Simpson                Seat belt  293
#&gt; 384         Simpson                 Speeding 2035
#&gt; 385           Smith        Breaks-Lights-etc    2
#&gt; 386           Smith         Careless driving    9
#&gt; 387           Smith License-Permit-Insurance   20
#&gt; 388           Smith         Other or unknown   18
#&gt; 389           Smith                Seat belt    5
#&gt; 390           Smith                 Speeding  206
#&gt; 391           Stone        Breaks-Lights-etc   35
#&gt; 392           Stone         Careless driving   80
#&gt; 393           Stone License-Permit-Insurance  298
#&gt; 394           Stone         Other or unknown  180
#&gt; 395           Stone                Seat belt  180
#&gt; 396           Stone                 Speeding 2135
#&gt; 397       Sunflower        Breaks-Lights-etc   28
#&gt; 398       Sunflower         Careless driving  119
#&gt; 399       Sunflower License-Permit-Insurance 1084
#&gt; 400       Sunflower         Other or unknown  144
#&gt; 401       Sunflower                Seat belt  518
#&gt; 402       Sunflower                 Speeding 2029
#&gt; 403    Tallahatchie        Breaks-Lights-etc    8
#&gt; 404    Tallahatchie         Careless driving    6
#&gt; 405    Tallahatchie License-Permit-Insurance   34
#&gt; 406    Tallahatchie         Other or unknown   29
#&gt; 407    Tallahatchie                Seat belt   60
#&gt; 408    Tallahatchie                 Speeding  256
#&gt; 409            Tate        Breaks-Lights-etc   50
#&gt; 410            Tate         Careless driving   70
#&gt; 411            Tate License-Permit-Insurance  335
#&gt; 412            Tate         Other or unknown  126
#&gt; 413            Tate                Seat belt  316
#&gt; 414            Tate                 Speeding 1080
#&gt; 415          Tippah        Breaks-Lights-etc   12
#&gt; 416          Tippah         Careless driving   58
#&gt; 417          Tippah License-Permit-Insurance  449
#&gt; 418          Tippah         Other or unknown  115
#&gt; 419          Tippah                Seat belt  357
#&gt; 420          Tippah                 Speeding  488
#&gt; 421      Tishomingo        Breaks-Lights-etc   31
#&gt; 422      Tishomingo         Careless driving   41
#&gt; 423      Tishomingo License-Permit-Insurance  278
#&gt; 424      Tishomingo         Other or unknown  163
#&gt; 425      Tishomingo                Seat belt  433
#&gt; 426      Tishomingo                 Speeding  746
#&gt; 427          Tunica License-Permit-Insurance    2
#&gt; 428          Tunica         Other or unknown    1
#&gt; 429          Tunica                 Speeding    1
#&gt; 430           Union        Breaks-Lights-etc    4
#&gt; 431           Union         Careless driving   69
#&gt; 432           Union License-Permit-Insurance  360
#&gt; 433           Union         Other or unknown  174
#&gt; 434           Union                Seat belt  442
#&gt; 435           Union                 Speeding 1413
#&gt; 436        Walthall        Breaks-Lights-etc   10
#&gt; 437        Walthall         Careless driving   34
#&gt; 438        Walthall License-Permit-Insurance  266
#&gt; 439        Walthall         Other or unknown  175
#&gt; 440        Walthall                Seat belt  156
#&gt; 441        Walthall                 Speeding 1181
#&gt; 442          Warren        Breaks-Lights-etc   36
#&gt; 443          Warren         Careless driving   29
#&gt; 444          Warren License-Permit-Insurance  183
#&gt; 445          Warren         Other or unknown  360
#&gt; 446          Warren                Seat belt  551
#&gt; 447          Warren                 Speeding 1570
#&gt; 448      Washington        Breaks-Lights-etc   31
#&gt; 449      Washington         Careless driving   49
#&gt; 450      Washington License-Permit-Insurance  227
#&gt; 451      Washington         Other or unknown  106
#&gt; 452      Washington                Seat belt  557
#&gt; 453      Washington                 Speeding 1775
#&gt; 454           Wayne        Breaks-Lights-etc    8
#&gt; 455           Wayne         Careless driving  159
#&gt; 456           Wayne License-Permit-Insurance  415
#&gt; 457           Wayne         Other or unknown  163
#&gt; 458           Wayne                Seat belt  461
#&gt; 459           Wayne                 Speeding 3041
#&gt; 460         Webster        Breaks-Lights-etc    1
#&gt; 461         Webster License-Permit-Insurance   14
#&gt; 462         Webster         Other or unknown    1
#&gt; 463         Webster                Seat belt   10
#&gt; 464         Webster                 Speeding  130
#&gt; 465       Wilkinson        Breaks-Lights-etc    1
#&gt; 466       Wilkinson License-Permit-Insurance   16
#&gt; 467       Wilkinson         Other or unknown    6
#&gt; 468       Wilkinson                Seat belt    5
#&gt; 469       Wilkinson                 Speeding   15
#&gt; 470         Winston        Breaks-Lights-etc   27
#&gt; 471         Winston         Careless driving   85
#&gt; 472         Winston License-Permit-Insurance  696
#&gt; 473         Winston         Other or unknown  290
#&gt; 474         Winston                Seat belt  294
#&gt; 475         Winston                 Speeding 2930
#&gt; 476       Yalobusha        Breaks-Lights-etc    3
#&gt; 477       Yalobusha         Careless driving   13
#&gt; 478       Yalobusha License-Permit-Insurance   48
#&gt; 479       Yalobusha         Other or unknown   25
#&gt; 480       Yalobusha                Seat belt  125
#&gt; 481       Yalobusha                 Speeding  108
#&gt; 482           Yazoo        Breaks-Lights-etc   28
#&gt; 483           Yazoo         Careless driving   86
#&gt; 484           Yazoo License-Permit-Insurance  239
#&gt; 485           Yazoo         Other or unknown  105
#&gt; 486           Yazoo                Seat belt  202
#&gt; 487           Yazoo                 Speeding 2868</code></pre>
<p>Now, to make this long data wide, we use <code>pivot_wider</code> from <code>tidyr</code> to turn the driver gender into columns. In addition to our data table we provide <code>pivot_wider</code> with two arguments: <code>names_from</code> describes which column to use for name of the output column, and <code>values_from</code> tells it from column to get the cell values. We’ll use a pipe so we can ignore the data argument.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="tidyr.html#cb52-1" aria-hidden="true" tabindex="-1"></a>violations_wide <span class="ot">&lt;-</span> violations <span class="sc">%&gt;%</span></span>
<span id="cb52-2"><a href="tidyr.html#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> violation, </span>
<span id="cb52-3"><a href="tidyr.html#cb52-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> n) </span>
<span id="cb52-4"><a href="tidyr.html#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="tidyr.html#cb52-5" aria-hidden="true" tabindex="-1"></a>violations_wide</span></code></pre></div>
<pre><code>#&gt; # A tibble: 82 x 7
#&gt;    county_name `Breaks-Lights-… `Careless drivi… `License-Permit…
#&gt;    &lt;chr&gt;                  &lt;int&gt;            &lt;int&gt;            &lt;int&gt;
#&gt;  1 Adams                      7               48              118
#&gt;  2 Alcorn                    62              100              737
#&gt;  3 Amite                     47               86              370
#&gt;  4 Attala                    99              113              526
#&gt;  5 Benton                     3                9               73
#&gt;  6 Bolivar                   57              139             1034
#&gt;  7 Calhoun                   26               38              383
#&gt;  8 Carroll                   26               40              323
#&gt;  9 Chickasaw                 42               53             1378
#&gt; 10 Choctaw                    8                6               73
#&gt; # … with 72 more rows, and 3 more variables: `Other or unknown` &lt;int&gt;, `Seat
#&gt; #   belt` &lt;int&gt;, Speeding &lt;int&gt;</code></pre>
</div>
<div id="wide-to-long-with-pivot_longer" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Wide to long with <code>pivot_longer</code></h2>
<p>What if we had the opposite problem, and wanted to go from a wide to long
format? For that, we use <code>pivot_longer</code>, which will increase the number of rows and decrease the number of columns. We provide the functino with thee arguments: <code>cols</code> which are the columns we want to pivot into the long format, <code>names_to</code>, which is a string specifying the name of the column to create from the data stored in the column names, and <code>values_to</code>, which is also a string, specifying the name of the column to create from the data stored in cell values.
So, to go backwards from <code>violations_wide</code>, and exclude <code>county_name</code> from the long format, we would do the following:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="tidyr.html#cb54-1" aria-hidden="true" tabindex="-1"></a>violations_long <span class="ot">&lt;-</span> violations_wide <span class="sc">%&gt;%</span></span>
<span id="cb54-2"><a href="tidyr.html#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>county_name,        <span class="co"># exclude column with county name</span></span>
<span id="cb54-3"><a href="tidyr.html#cb54-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;violation&quot;</span>,     <span class="co"># name is a string!</span></span>
<span id="cb54-4"><a href="tidyr.html#cb54-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;n&quot;</span>)            <span class="co"># also a string</span></span>
<span id="cb54-5"><a href="tidyr.html#cb54-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-6"><a href="tidyr.html#cb54-6" aria-hidden="true" tabindex="-1"></a>violations_long</span></code></pre></div>
<pre><code>#&gt; # A tibble: 492 x 3
#&gt;    county_name violation                    n
#&gt;    &lt;chr&gt;       &lt;chr&gt;                    &lt;int&gt;
#&gt;  1 Adams       Breaks-Lights-etc            7
#&gt;  2 Adams       Careless driving            48
#&gt;  3 Adams       License-Permit-Insurance   118
#&gt;  4 Adams       Other or unknown            35
#&gt;  5 Adams       Seat belt                  229
#&gt;  6 Adams       Speeding                   505
#&gt;  7 Alcorn      Breaks-Lights-etc           62
#&gt;  8 Alcorn      Careless driving           100
#&gt;  9 Alcorn      License-Permit-Insurance   737
#&gt; 10 Alcorn      Other or unknown           418
#&gt; # … with 482 more rows</code></pre>
<p>We could also have used a specification for what columns to include. This can be
useful if you have a large number of identifying columns, and it’s easier to
specify what to gather than what to leave alone. And if the columns are adjacent to each other, we don’t even need to list them all out – we can use the <code>:</code> operator!</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="tidyr.html#cb56-1" aria-hidden="true" tabindex="-1"></a>violations_wide <span class="sc">%&gt;%</span></span>
<span id="cb56-2"><a href="tidyr.html#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">`</span><span class="at">Breaks-Lights-etc</span><span class="st">`</span><span class="sc">:</span>Speeding,      <span class="co"># this also works</span></span>
<span id="cb56-3"><a href="tidyr.html#cb56-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;violation&quot;</span>, </span>
<span id="cb56-4"><a href="tidyr.html#cb56-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;n&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; # A tibble: 492 x 3
#&gt;    county_name violation                    n
#&gt;    &lt;chr&gt;       &lt;chr&gt;                    &lt;int&gt;
#&gt;  1 Adams       Breaks-Lights-etc            7
#&gt;  2 Adams       Careless driving            48
#&gt;  3 Adams       License-Permit-Insurance   118
#&gt;  4 Adams       Other or unknown            35
#&gt;  5 Adams       Seat belt                  229
#&gt;  6 Adams       Speeding                   505
#&gt;  7 Alcorn      Breaks-Lights-etc           62
#&gt;  8 Alcorn      Careless driving           100
#&gt;  9 Alcorn      License-Permit-Insurance   737
#&gt; 10 Alcorn      Other or unknown           418
#&gt; # … with 482 more rows</code></pre>
<p>There are many powerful operations you can do with the <code>pivot_*</code> functions. To learn more review the vignette:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="tidyr.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vignette</span>(<span class="st">&quot;pivot&quot;</span>)</span></code></pre></div>
<blockquote>
<h3>
Challenge
</h3>
<p>1.From the stops dataframe create a wide data frame <code>tr_wide</code> with
“year” as columns, each row is a different violation,
and the values are the
number of traffic stops per each violation, roughly like this:</p>
<p><code>violation      | 2013 | 2014 | 2015 ...</code>
<code>Break-Lights   |   65 |    54|   67 ...</code>
<code>Speeding       |  713 |   948|  978 ...</code>
<code>...</code></p>
<p>Use <code>year()</code> from the lubridate package. Hint: You will need to summarize
and count the traffic stops before reshaping the table.</p>
</blockquote>
<blockquote>
<ol start="2" style="list-style-type: decimal">
<li>Now take the data frame, and make it long again, so each row is a
unique violation - year combination, like this:</li>
</ol>
<p><code>violation  | year | n of stops</code>
<code>Speeding   | 2013 | 65</code>
<code>Speeding   | 2014 | 54</code>
<code>... etc</code></p>
</blockquote>
<!---
  
--->
</div>
<div id="exporting-data" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Exporting data</h2>
<p>Similar to the <code>read_csv()</code> function used for reading CSV files into R, there is a <code>write_csv()</code> function that generates CSV files from data frames.</p>
<p>Before using <code>write_csv()</code>, we are going to create a new folder, <code>data_output</code>,
in our working directory that will store this generated dataset. We don’t want
to write generated datasets in the same directory as our raw data. It’s good
practice to keep them separate. The <code>data</code> folder should only contain the raw,
unaltered data, and should be left alone to make sure we don’t delete or modify
it. In contrast, our script will generate the contents of the <code>data_output</code>
directory, so even if the files it contains are deleted, we can always
re-generate them.</p>
<p>We can now save the table generated above in our <code>data_output</code>
folder:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="tidyr.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(violation_wide, <span class="st">&quot;data_output/county_violations.csv&quot;</span>)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="dplyr.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/cengel/R-data-wrangling/edit/master/02-tidyr.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R-data-wrangling.pdf", "R-data-wrangling.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
